<!DOCTYPE html>
<html>
<head>
<title> Standard Changes Private Data Management |  The Open Effects Association</title>
<link rel="shortcut icon" type="image/x-icon" href="/assets/ofx_favicon-c6cb586c0f8efbaeff3167d1fd7cfca2.ico" />
<link rel="stylesheet" media="all" href="/assets/application-8fbc3aa4b380a52e15d414a59177d3a2.css" />
<script src="/assets/application-f474998312dbf9d63cf3d555583ac5a1.js"></script>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="HBh0hj9gv7NF01hTpnKYPl4dYlaiTWNdkgqIU3WJpk0yAhw1mVSynPAMGr7SQCPqCz0WE/swRb9cC5w+YNindg==" />
<meta content='IE=edge' http_equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<script src='//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js'></script>
</head>
<body class='c_standard_changes a_show' data-spy='scroll' data-target='.navbar-top' role='document'>
<div class='modal fade' id='terminal'>
<div class='modal-dialog modal-lg'>
<div class='modal-content'>
<div class='modal-header'>
<div aria-hidden='true' class='button close' data-dismiss='modal' type='button'>&times;</div>
<h4 class='modal-title'>Terminal Output</h4>
</div>
<div class='modal-body'>
<div class='window'></div>
</div>
</div>
</div>
</div>
<div class='wrapper'>
<div class='navbar navbar-inverse navbar-fixed-top' role='components'>
<div class='container'>
<div class='navbar-header'>
<button class='navbar-toggle' data-target='.navbar-collapse' data-toggle='collapse' type='button'>
<span class='sr-only'>Toggle components</span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
</button>
</div>
<div class='navbar-collapse collapse'>
<div class='row'>
<div class='navbar-left'>
<div class='navbar-top'>
<div class='mobile'>
<ul class='nav navbar-nav'>
<li><a href="/">Welcome</a></li>
<li><a class="navbar-link" href="/standard_changes">Standards Discussion</a></li>
<li><a class="navbar-link" href="/contact_form">Contact</a></li>
</ul>
</div>
<div class='desktop'>
<ul class='nav navbar-nav'>
<li class='nav-logo'>
<a class="navbar-link" href="/"><img src="/assets/OFX_small-41bc647075217376f758003aebeacf15.png" alt="Ofx small" /></a>
</li>
<li class='dropdown'>
<a href="/">Welcome <span class="glyphicon glyphicon-circle-arrow-left"></span></a>
<ul class='dropdown-menu inverse-dropdown'>
<li>
<a class="navbar-link" href="#standard">Why a Standard?</a>
</li>
<li>
<a class="navbar-link" href="#implementers">For Implementers</a>
</li>
<li>
<a class="navbar-link" href="#organization">Association Business</a>
</li>
</ul>
</li>
<li class='dropdown api'>
<a class='navbar-link'>API Documentation <span class="glyphicon glyphicon-circle-arrow-down"></span></a>
<ul class='dropdown-menu inverse-dropdown'>
<li>
<a class="navbar-link" target="_blank" href="/documentation/api_doc">API Reference</a>
</li>
<li>
<a class="navbar-link" target="_blank" href="https://openfx.readthedocs.io/en/doc/Reference/index.html">Programming Reference</a>
</li>
<li>
<a class="navbar-link" target="_blank" href="https://openfx.readthedocs.io/en/doc/Guide/index.html">Programming Guide</a>
</li>
</ul>
</li>
<li><a class="navbar-link" href="/standard_changes">Standards Discussion</a></li>
<li><a class="navbar-link" href="/contact_form">Contact</a></li>
</ul>
</div>
</div>
</div>
<div class='desktop'>

</div>
</div>
</div>
</div>
</div>
<div class='container' role='main'>
</div>
<div class='container'>
<div class='row'>
<div class='col-md-offset-2 col-md-8'>
<div class='btn-group'>
<a type="button" class="btn btn-default" href="/standard_changes"><span class='glyphicon glyphicon-circle-arrow-left'></span> Back to standard change list</a>
</div>

<br>
<br>
<div class='panel panel-warning'>
<div class='panel-heading'>
<h3 class='panel-title'>
Private Data Management
<span class='pull-right'>Proposed</span>
</h3>
</div>
<div class='panel-body'>
<p>
<b>Standard version:</b>
2.0
</p>
<p>
<b>Major Change</b>
</p>
<label>Subcommittee</label>
<p></p>
<label>Overview</label>
<p dir="ltr">Private data is parameter data a plugin keeps in its own data structures. These are for large or complex data types that can't be represented with the current parameter set. For example a custom roto-spline parameter. For persistance, and possibly animation, private data needs to be synced back into a plugin's actual parameter set at some point so the host can deal with the data appropriately. Syncing is currently done by serialisation into a string param (or in the future, a binary blob param).&nbsp;</p>
<p dir="ltr"><strong>Note</strong> that private data should not be used to cache intermediate computations (such as motion vectors). We need a separate cache suite for that.</p>
<p dir="ltr">There is an action, <em>kOfxActionSyncPrivateData</em>, which a host calls when it needs the plugin to serialise its private data into OFX parameters. Currently the documentation of how to manage private data and how to sync that data to persistent parameters is unclear.</p>
<p dir="ltr">Furthermore, when a host needs to calculate a cache signature, the host application needs&nbsp;the plugin to sync it's private data into the parameter set. This is potentially expensive and could lead to a noticable decrease in performance, eg: a point on our custom roto spline being dragged interactively would make the entire (possibly large) spline set be synced back at every pointer move before a render, just to calculate a hash.</p>
<p dir="ltr">&nbsp;</p>
<p>&nbsp;</p>
<label>Solution</label>
<p dir="ltr"><span>Better documentation of the private data syncing mechanism would help alot.</span></p>
<p dir="ltr"><span>To minimise the number of private param synchronisation events we need to have the plugin generate a signature for the private data on behalf of the host application. This will require&hellip;</span></p>
<ul>
<li><span>a new parameter property </span><em style="font-size: 0.9em;">kOfxParamPropPrivateDataParam</em><span>, which is used to indicate that private data will be saved into that param during a </span><em style="font-size: 0.9em;">kOfxActionSyncPrivateData</em><span>. When constructing a signature for the parameter, the host this param and let the plugin sign any data behind it,</span></li>
<li><span>a new action </span><em style="font-size: 0.9em;">kOfxActionSignPrivateData</em><span> which the host uses to have the plugin&nbsp;signing all the private data without serialising, this gets put into the&nbsp;<em>outargs</em> property...</span></li>
<ul>
<li><em><span>kOfxParamPropPrivateDataSignature</span></em><span>, which is the signature for </span><span>all</span><span> private data in the param set. The host should use this instead of any hash from params flaged with&nbsp;<em>kOfxParamPropPrivateDataParam</em></span></li>
</ul>
</ul>
</div>
</div>
<div class='btn-group'>
<a type="button" class="btn btn-default" href="/standard_changes"><span class='glyphicon glyphicon-circle-arrow-left'></span> Back to standard change list</a>
</div>

<br>
<br>
<div class='panel panel-default'>
<div class='panel-body'>
<h4 class='text-primary'>Discussion</h4>
<h5>Comments</h5>
<div class='well well-sm'>
<div class='comment user-11' id='cid-247'>
<div class='content'>
<p>(Pierre Jasmin): I am not sure this needs to wait for V2. Anything else than the render call in OFX need parallel Instance Data usagey?&nbsp; Ideally SyncPrivateData should be only for save, auto-save, duplicate node,...&nbsp;</p>
<p>Side comment: Right now there are different behaviors including - 1) people that don't have interrupt, 2) people that have a timer - abort and fall back to a lower resolution (possibly to draft mode if that feature is supported), and 3) people that abort all the time so the image is only evaluate on mouse up or if the slider stops moving for long enough for the render to go through.</p>
</div>
</div>
<div class='author text-muted'>
Pierre Jasmin |  4:43 pm,   6 Jun 2015
</div>
</div>

</div>
</div>

<div class='btn-group'>
<a type="button" class="btn btn-default" href="/standard_changes"><span class='glyphicon glyphicon-circle-arrow-left'></span> Back to standard change list</a>
</div>

</div>
</div>
</div>

<div class='push'></div>
</div>
<footer>
<ul class='footer-link-group'>
<li>
<a target="_blank" class="footer-link" href="https://github.com/ofxa/openfx">OFX @ Github</a>
</li>
<li>
<a title="Association details" class="footer-link" href="/contents/page/association_information">Association Information</a>
</li>
</ul>
<br>
Copyright  &copy;2023 The Open Effects Association
</footer>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
<title> Standard Changes Modifying Plugin Properties After Description |  The Open Effects Association</title>
<link rel="shortcut icon" type="image/x-icon" href="/assets/ofx_favicon-c6cb586c0f8efbaeff3167d1fd7cfca2.ico" />
<link rel="stylesheet" media="all" href="/assets/application-8fbc3aa4b380a52e15d414a59177d3a2.css" />
<script src="/assets/application-f474998312dbf9d63cf3d555583ac5a1.js"></script>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="rTBqXtezxEhT+rWYEKhmuC4LOP+a2V5Fk7YVrSqGxzWDKgLtcYfJZ+Yl93Vkmt1seytMusOkeKddtwHAP9fGDg==" />
<meta content='IE=edge' http_equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<script src='//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js'></script>
</head>
<body class='c_standard_changes a_show' data-spy='scroll' data-target='.navbar-top' role='document'>
<div class='modal fade' id='terminal'>
<div class='modal-dialog modal-lg'>
<div class='modal-content'>
<div class='modal-header'>
<div aria-hidden='true' class='button close' data-dismiss='modal' type='button'>&times;</div>
<h4 class='modal-title'>Terminal Output</h4>
</div>
<div class='modal-body'>
<div class='window'></div>
</div>
</div>
</div>
</div>
<div class='wrapper'>
<div class='navbar navbar-inverse navbar-fixed-top' role='components'>
<div class='container'>
<div class='navbar-header'>
<button class='navbar-toggle' data-target='.navbar-collapse' data-toggle='collapse' type='button'>
<span class='sr-only'>Toggle components</span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
<span class='icon-bar'></span>
</button>
</div>
<div class='navbar-collapse collapse'>
<div class='row'>
<div class='navbar-left'>
<div class='navbar-top'>
<div class='mobile'>
<ul class='nav navbar-nav'>
<li><a href="/">Welcome</a></li>
<li><a class="navbar-link" href="/standard_changes">Standards Discussion</a></li>
<li><a class="navbar-link" href="/contact_form">Contact</a></li>
</ul>
</div>
<div class='desktop'>
<ul class='nav navbar-nav'>
<li class='nav-logo'>
<a class="navbar-link" href="/"><img src="/assets/OFX_small-41bc647075217376f758003aebeacf15.png" alt="Ofx small" /></a>
</li>
<li class='dropdown'>
<a href="/">Welcome <span class="glyphicon glyphicon-circle-arrow-left"></span></a>
<ul class='dropdown-menu inverse-dropdown'>
<li>
<a class="navbar-link" href="#standard">Why a Standard?</a>
</li>
<li>
<a class="navbar-link" href="#implementers">For Implementers</a>
</li>
<li>
<a class="navbar-link" href="#organization">Association Business</a>
</li>
</ul>
</li>
<li class='dropdown api'>
<a class='navbar-link'>API Documentation <span class="glyphicon glyphicon-circle-arrow-down"></span></a>
<ul class='dropdown-menu inverse-dropdown'>
<li>
<a class="navbar-link" target="_blank" href="/documentation/api_doc">API Reference</a>
</li>
<li>
<a class="navbar-link" target="_blank" href="https://openfx.readthedocs.io/en/doc/Reference/index.html">Programming Reference</a>
</li>
<li>
<a class="navbar-link" target="_blank" href="https://openfx.readthedocs.io/en/doc/Guide/index.html">Programming Guide</a>
</li>
</ul>
</li>
<li><a class="navbar-link" href="/standard_changes">Standards Discussion</a></li>
<li><a class="navbar-link" href="/contact_form">Contact</a></li>
</ul>
</div>
</div>
</div>
<div class='desktop'>

</div>
</div>
</div>
</div>
</div>
<div class='container' role='main'>
</div>
<div class='container'>
<div class='row'>
<div class='col-md-offset-2 col-md-8'>
<div class='btn-group'>
<a type="button" class="btn btn-default" href="/standard_changes"><span class='glyphicon glyphicon-circle-arrow-left'></span> Back to standard change list</a>
</div>

<br>
<br>
<div class='panel panel-warning'>
<div class='panel-heading'>
<h3 class='panel-title'>
Modifying Plugin Properties After Description
<span class='pull-right'>Proposed</span>
</h3>
</div>
<div class='panel-body'>
<p>
<b>Standard version:</b>
1.4
</p>
<p>
<b>Minor Change</b>
</p>
<label>Subcommittee</label>
<p><p>RE:Vision would like an host to test Plugin Instances part</p>
<p>&nbsp;</p></p>
<label>Overview</label>
<p dir="ltr">&nbsp;</p>
<p><strong>Suggested Solution For Plugin Instances</strong></p>
<p dir="ltr"><span>The following properties, currently only settable in the describe actions, should be dynamically setable in an instance. </span></p>
<ul>
<li dir="ltr">
<p dir="ltr"><span>kOfxImageEffectPropSupportsTiles</span></p>
</li>
<li dir="ltr"><span>kOfxImageEffectOpenGLRenderSupported</span></li>
</ul>
<p>&nbsp;</p>
<p>For example a plugin might support tiles in CPU but not in GPU</p>
<p>For example an host might be GPU centric but a driver comes up and break plug-in implementation on GPU, at least plug-in can be selected by user to render CPU.</p>
<label>Solution</label>
<p>Feature Request&nbsp;has been broken in two - parameter hint moved to next version</p>
<p>&nbsp;</p>
<p>Host that support these 2 processing modes should allow an effect to change their mind in Instance Changed.</p>
<p>For plug-ins, it is safer to attach such state changes to a parameter so there is not a synch issue with render threads.</p>
<p>We might need at some point a way for host to communicate user has selected to render GPU or CPU sort of things. This is different.&nbsp;</p>
<p>&nbsp;</p>
<p>Pierre: &nbsp;"</p>
<p>Right now it's what we do: (sorry for a bit of non pure OFX here)<br /> <br /> gPropHost&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; = (OfxPropertySuiteV1 *)&nbsp;&nbsp;&nbsp; gHost-&gt;fetchSuite(gHost-&gt;host, kOfxPropertySuite, 1);&nbsp; // <strong>gHost is cached here on Loading of plugin</strong><br /> <br /> In InstanceChanged:</p>
<blockquote>OfxPropertySetHandle effectProps;<br /> mEffectHost-&gt;getPropertySet(<strong>effect</strong>, &amp;<strong>effectProps</strong>);&nbsp; // OfxImageEffectHandle&nbsp; effect is passed by host<br /> gPropHost-&gt;propSetString(<strong>effectProps</strong>, kOfxImageEffectPropOpenGLRenderSupported, 0, "true"); // or false is how we envision switching state</blockquote>
<p><br /> When setting to true we also do this (assuming it's not set):<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // we support all the OpenGL bit depths<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gPropHost-&gt;propSetString(effectProps, kOfxOpenGLPropPixelDepth, 0, kOfxBitDepthByte);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gPropHost-&gt;propSetString(effectProps, kOfxOpenGLPropPixelDepth, 1, kOfxBitDepthShort);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gPropHost-&gt;propSetString(effectProps, kOfxOpenGLPropPixelDepth, 2, kOfxBitDepthFloat);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // and assuming host will convert to 32b float -&nbsp; kOfxBitDepthHalf - as we don't handle it&nbsp; (we could for IO, butsame as host, see no advantage today to us)</p>
<p>"</p>
<p>&nbsp;</p>
</div>
</div>
<div class='btn-group'>
<a type="button" class="btn btn-default" href="/standard_changes"><span class='glyphicon glyphicon-circle-arrow-left'></span> Back to standard change list</a>
</div>

<br>
<br>
<div class='panel panel-default'>
<div class='panel-body'>
<h4 class='text-primary'>Discussion</h4>
<p>No comments on this change yet</p>
</div>
</div>

<div class='btn-group'>
<a type="button" class="btn btn-default" href="/standard_changes"><span class='glyphicon glyphicon-circle-arrow-left'></span> Back to standard change list</a>
</div>

</div>
</div>
</div>

<div class='push'></div>
</div>
<footer>
<ul class='footer-link-group'>
<li>
<a target="_blank" class="footer-link" href="https://github.com/ofxa/openfx">OFX @ Github</a>
</li>
<li>
<a title="Association details" class="footer-link" href="/contents/page/association_information">Association Information</a>
</li>
</ul>
<br>
Copyright  &copy;2023 The Open Effects Association
</footer>
</body>
</html>

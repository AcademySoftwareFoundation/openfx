<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
      <title>Packaging OFX Plug-ins</title>
      <link rel="stylesheet" type="text/css" href="/assets/ofxStyle.css"></link>
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></meta>
      <link rel="home" href="/documentation/reference/index.html" title="The OFX Image Effect Plug-in API, 1.4, Programming Reference."></link>
      <link rel="up" href="/documentation/reference/ch02.html" title="Chapter 2. The Generic Core API"></link>
      <link rel="prev" href="/documentation/reference/ch02.html" title="Chapter 2. The Generic Core API"></link>
      <link rel="next" href="/documentation/reference/ch02s03.html" title="OFX Include Files"></link>
      <link rel="stylesheet" type="text/css" href="/assets/ofx-docbook-nav.css"></link>
   </head>
   <body>
      <div id="ofx-main-nav">
         <ul>
            <li>
               <a href="/">
                  <img alt="Ofx small" src="/assets/OFX_small.png"></img>
               </a>
            </li>
            <li>
               <a href="/">
                  Back to Main Site
                  <span class="glyph"></span>
               </a>
            </li>
            <li>
               <a href="/documentation/api_doc">API Reference</a>
            </li>
            <li>
               <a href="/documentation/reference">Programming Reference</a>
            </li>
            <li>
               <a href="https://github.com/ofxa/openfx/blob/master/Guide/Doc/ofxProgrammingGuide.adoc">Programming Guide</a>
            </li>
         </ul>
      </div>
      <div class="wrapper" id="reference">
         <div class="navheader">
            <table width="100%" summary="Navigation header">
               <tr>
                  <th colspan="3" align="center">Packaging OFX Plug-ins</th>
               </tr>
               <tr>
                  <td width="20%" align="left">
                     <a accesskey="p" href="/documentation/reference/ch02.html">Prev</a>
                      
                  </td>
                  <th width="60%" align="center">Chapter 2. The Generic Core API</th>
                  <td width="20%" align="right">
                      
                     <a accesskey="n" href="/documentation/reference/ch02s03.html">Next</a>
                  </td>
               </tr>
            </table>
            <hr></hr>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both">
                        <a id="idp11145984"></a>
                        Packaging OFX Plug-ins
                     </h2>
                  </div>
               </div>
            </div>
            <p>Where a host application chooses to search for OFX plug ins, what
    binary format they are in and any directory hierarchy is entirely up to
    it. However, it is strongly recommended that the following scheme be
    followed.</p>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="idp11147824"></a>
                           Binary Types
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Plug-ins should be distributed in the following formats,
      depending on the host operating system.... </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
	  Microsoft Windows, as ".dll" dynamically linked libraries, 
	</li>
                     <li class="listitem">
	  Apple OSX, as Mach-O binary bundles, 
	</li>
                     <li class="listitem">
	  IRIX and LINUX, as ELF dynamic shared objects. 
	</li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="idp11150496"></a>
                           Installation Directory Hierarchy
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  Each plug-in binary is distributed as a Mac OS X package style directory hierarchy. Note that there are two distinct meanings of 'bundle', one referring to a binary file format, the other to a directory hierarchy used to distribute software. We are distributing binaries in a bundle package, and in the case of OSX, the binary is a binary bundle. All the binaries must end with
                  <code class="literal">".ofx"</code>
                  , regardless of the host operating system.
               </p>
               <p>The directory hierarchy is as follows..... 
      </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
                        NAME.ofx.bundle
                        <div class="itemizedlist">
                           <ul class="itemizedlist" style="list-style-type: circle; ">
                              <li class="listitem">
                                 Contents
                                 <div class="itemizedlist">
                                    <ul class="itemizedlist" style="list-style-type: square; ">
                                       <li class="listitem">Info.plist</li>
                                       <li class="listitem">
                                          Resources
                                          <div class="itemizedlist">
                                             <ul class="itemizedlist" style="list-style-type: disc; ">
                                                <li class="listitem">NAME.xml</li>
                                                <li class="listitem">PLUGIN_A.png</li>
                                                <li class="listitem">PLUGIN_A.svg</li>
                                                <li class="listitem">PLUGIN_B.png</li>
                                                <li class="listitem">PLUGIN_B.svg</li>
                                                <li class="listitem">...</li>
                                             </ul>
                                          </div>
                                       </li>
                                       <li class="listitem">
                                          ARCHITECTURE_A
                                          <div class="itemizedlist">
                                             <ul class="itemizedlist" style="list-style-type: disc; ">
                                                <li class="listitem">NAME.ofx</li>
                                             </ul>
                                          </div>
                                       </li>
                                       <li class="listitem">
                                          ARCHITECTURE_B
                                          <div class="itemizedlist">
                                             <ul class="itemizedlist" style="list-style-type: disc; ">
                                                <li class="listitem">NAME.ofx</li>
                                             </ul>
                                          </div>
                                       </li>
                                       <li class="listitem">...</li>
                                       <li class="listitem">
                                          ARCHITECTURE_N
                                          <div class="itemizedlist">
                                             <ul class="itemizedlist" style="list-style-type: disc; ">
                                                <li class="listitem">NAME.ofx</li>
                                             </ul>
                                          </div>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ul>
               </div>
               <p>
      
      
      Where... </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
	  Info.plist is relevant for OSX only and needs to be filled in appropriately, 
	</li>
                     <li class="listitem">
	  NAME is the file name you want the installed plug-in to be identified by, 
	</li>
                     <li class="listitem">
                        PLUGIN.png - is an optional portable graphics file image to use as an icon for the plug-in in the binary which has a matching
                        <em class="structfield">
                           <code>pluginIdentifier</code>
                        </em>
                        field in the
                        <span class="structname">OfxPlugin</span>
                        struct,
                     </li>
                     <li class="listitem">
                        PLUGIN.svg - is an optional scalable vector graphic file to use as an icon for the plug-in in the binary which has a matching
                        <em class="structfield">
                           <code>pluginIdentifier</code>
                        </em>
                        field in the
                        <span class="structname">OfxPlugin</span>
                        struct,
                     </li>
                     <li class="listitem">
                        ARCHITECTURE is the specific operating system architecture the plug-in was built for, these are currently...
                        <div class="itemizedlist">
                           <ul class="itemizedlist" style="list-style-type: circle; ">
                              <li class="listitem">MacOS - for Apple Macintosh OS X 32 bit and/or univeral binaries</li>
                              <li class="listitem">MacOS-x86-64 - for Apple Macintosh OS X, specifically on intel x86 CPUs running AMD's 64 bit extensions. 64 bit host applications should check this first, and if it doesn't exist or is empty, fall back to "MacOS" looking for a universal binary.</li>
                              <li class="listitem">Win32 - for Microsoft Windows (compiled 32 bit)</li>
                              <li class="listitem">Win64 - for Microsoft Windows (compiled 64 bit)</li>
                              <li class="listitem">IRIX - for SGI IRIX plug-ins (compiled 32 bit)</li>
                              <li class="listitem">IRIX64 - for SGI IRIX plug-ins (compiled 64 bit)</li>
                              <li class="listitem">Linux-x86 - for Linux on x86 CPUs (compiled 32 bit)</li>
                              <li class="listitem">Linux-x86-64 - for Linux on x86 CPUs running AMD's 64 bit extensions</li>
                           </ul>
                        </div>
                     </li>
                  </ul>
               </div>
               <p> Note that not all the above architectures need be
      supported, at least one.</p>
               <p>This structure is necessary on OS X, but it also gives a nice
      skeleton to hang all other operating systems from in a single install,
      as well as a clean place to put resources.</p>
               <p>
                  The
                  <code class="filename">Info.plist</code>
                  is specific to Apple and you should consult the Apple developer's website for more details. It should contain the following keys...
               </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
	  CFBundleExecutable - the name of the binary bundle in the MacOS directory 
	</li>
                     <li class="listitem">
	  CFBundlePackageType - to be 'BNDL' 
	</li>
                     <li class="listitem">
	  CFBundleInfoDictionaryVersion 
	</li>
                     <li class="listitem">
	  CFBundleVersion 
	</li>
                     <li class="listitem">
	  CFBundleDevelopmentRegion 
	</li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="ArchitectureInstallingLocation"></a>
                           Installation Location
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Plug ins are searched for in a variety of locations, both
      default and user specified. All such directories are examined for
      plug-in bundles and sub directories are also recursively
      examined.</p>
               <p>A list of directories is supplied in the "OFX_PLUGIN_PATH"
      environment variable, these are examined, first to last, for plug ins,
      then the default location is examined.</p>
               <p>
      On Microsoft Windows machines, the plug ins are searched for in,
</p>
               <div class="orderedlist">
                  <ol class="orderedlist" type="1">
                     <li class="listitem">
	  the ';' separated directory list specified by the environment variable "OFX_PLUGIN_PATH"
	</li>
                     <li class="listitem">
                        the directory returned by
                        <code class="code">getStdOFXPluginPath</code>
                        in the following code snippet...
                        <pre class="programlisting">
#include "shlobj.h"
#include "tchar.h"
const TCHAR *getStdOFXPluginPath(void)
{
  static TCHAR buffer[MAX_PATH];
  static int gotIt = 0;
  if(!gotIt) {
    gotIt = 1;	   
    SHGetFolderPath(NULL, CSIDL_PROGRAM_FILES_COMMON, NULL, SHGFP_TYPE_CURRENT, buffer);
    _tcscat(buffer, __T("\\OFX\\Plugins"));
  }
  return buffer;	   
}
	      </pre>
                     </li>
                     <li class="listitem">
	  the directory "C:\Program Files\Common Files\OFX\Plugins". This location is deprecated, and it is returned by the code snippet above on English language systems. However it should still be examined by hosts for backwards compatibility.
	</li>
                  </ol>
               </div>
               <p>
      On Apple OSX machines, the plug ins are searched for
      in, </p>
               <div class="orderedlist">
                  <ol class="orderedlist" type="1">
                     <li class="listitem">
	  the ';' separated directory list specified by the environment variable "OFX_PLUGIN_PATH" 
	</li>
                     <li class="listitem">
	  the directory "/Library/OFX/Plugins" 
	</li>
                  </ol>
               </div>
               <p> On UNIX, Linux and other UNIX like operating systems,
      </p>
               <div class="orderedlist">
                  <ol class="orderedlist" type="1">
                     <li class="listitem">
	  the ':' separated directory specified by the environment variable "OFX_PLUGIN_PATH" 
	</li>
                     <li class="listitem">
	  the directory "/usr/OFX/Plugins" 
	</li>
                  </ol>
               </div>
               <p>Any bundle or sub-directory name starting with the character '@'
      is to be ignored. Such directories or bundles must be skipped.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="idp11182864"></a>
                           Plug-in Icons
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Some hosts may wish to display an icon associated with a plug-in
      on their interfaces. Any such icon must be in the Portable Network
      Graphics format (see http://www.libpng.org/) and must contain 32 bits
      of colour, including an alpha channel. Ideally it should be at least
      128x128 pixels.</p>
               <p>Host applications should dynamically resize the icon to fit
      their preferred icon size. The icon should not have it's aspect
      changed, rather the host should fill with some appropriate colour any
      blank areas due to aspect mis matches.</p>
               <p>Ideally plug-in developers should not render the plug-in's name
      into the icon, as this may be changed by the resource file, especially
      for internationalisation purposes. Hosts should thus present the
      plug-in's name next to the icon in some way.</p>
               <p>
                  The icon file must be named as the corresponding
                  <em class="structfield">
                     <code>pluginIdentifier</code>
                  </em>
                  field from the
                  <span class="structname">OfxPlugin</span>
                  , post pended with '.png' and be placed in the resources sub-directory.
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="idp11186784"></a>
                           Externally Specified Resources
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  Some plug-ins may supply an externally specified resource file. Typically this is for tasks such as internationalising interfaces, tweaking user interfaces for specific hosts and so on. These are XML files and have DTD associated with the specific API, for example OFX Image Effect DTD is found in
                  <code class="filename">ofx.dtd</code>
                  .
               </p>
               <p>
                  The xml resource file is installed in the
                  <code class="filename">Resources</code>
                  sub directory of the bundle hierarchy. It's name will be
                  <code class="filename">NAME.xml</code>
                  , where name is the base name of the bundle folder and the effect binaries.
               </p>
            </div>
         </div>
         <div class="navfooter">
            <hr></hr>
            <table width="100%" summary="Navigation footer">
               <tr>
                  <td width="40%" align="left">
                     <a accesskey="p" href="/documentation/reference/ch02.html">Prev</a>
                      
                  </td>
                  <td width="20%" align="center">
                     <a accesskey="u" href="/documentation/reference/ch02.html">Up</a>
                  </td>
                  <td width="40%" align="right">
                      
                     <a accesskey="n" href="/documentation/reference/ch02s03.html">Next</a>
                  </td>
               </tr>
               <tr>
                  <td width="40%" align="left" valign="top">Chapter 2. The Generic Core API </td>
                  <td width="20%" align="center">
                     <a accesskey="h" href="/documentation/reference/index.html">Home</a>
                  </td>
                  <td width="40%" align="right" valign="top"> OFX Include Files</td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
      <title>Chapter 12. Image Effect Clip Preferences</title>
      <link rel="stylesheet" type="text/css" href="/assets/ofxStyle.css"></link>
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1"></meta>
      <link rel="home" href="/documentation/reference/index.html" title="The OFX Image Effect Plug-in API, 1.4, Programming Reference."></link>
      <link rel="up" href="/documentation/reference/index.html" title="The OFX Image Effect Plug-in API, 1.4, Programming Reference."></link>
      <link rel="prev" href="/documentation/reference/ch11s03.html" title="Interact Actions"></link>
      <link rel="next" href="/documentation/reference/ch12s02.html" title="Continuously Sampled Effects"></link>
      <link rel="stylesheet" type="text/css" href="/assets/ofx-docbook-nav.css"></link>
   </head>
   <body>
      <div id="ofx-main-nav">
         <ul>
            <li>
               <a href="/">
                  <img alt="Ofx small" src="/assets/OFX_small.png"></img>
               </a>
            </li>
            <li>
               <a href="/">
                  Back to Main Site
                  <span class="glyph"></span>
               </a>
            </li>
            <li>
               <a href="/documentation/api_doc">API Reference</a>
            </li>
            <li>
               <a href="/documentation/reference">Programming Reference</a>
            </li>
            <li>
               <a href="https://github.com/ofxa/openfx/blob/master/Guide/Doc/ofxProgrammingGuide.adoc">Programming Guide</a>
            </li>
         </ul>
      </div>
      <div class="wrapper" id="reference">
         <div class="navheader">
            <table width="100%" summary="Navigation header">
               <tr>
                  <th colspan="3" align="center">Chapter 12. Image Effect Clip Preferences</th>
               </tr>
               <tr>
                  <td width="20%" align="left">
                     <a accesskey="p" href="/documentation/reference/ch11s03.html">Prev</a>
                      
                  </td>
                  <th width="60%" align="center"> </th>
                  <td width="20%" align="right">
                      
                     <a accesskey="n" href="/documentation/reference/ch12s02.html">Next</a>
                  </td>
               </tr>
            </table>
            <hr></hr>
         </div>
         <div class="chapter">
            <div class="titlepage">
               <div>
                  <div>
                     <h1 class="title">
                        <a id="ImageEffectClipPreferences"></a>
                        Chapter 12. Image Effect Clip Preferences
                     </h1>
                  </div>
               </div>
            </div>
            <p>
               The
               <a class="link" href="/documentation/reference/ch13s20.html" title="The Get Clip Preferences Action">
                  <code class="code">kOfxImageEffectActionGetClipPreferences</code>
               </a>
               action is passed to an effect to allow a plugin to specify how it wishes to deal with it's input clips and to set properties in it's output clip. This is especially important when there are multiple inputs of which my have differing properties, eg; pixel depth.
            </p>
            <p>
      More specifically, there are six properties that can be set during the clip preferences action, some on the input clip, some on the output clip, some on both. These are...
      </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">the depth of a clip's pixels, input or output clip,</li>
                  <li class="listitem">the components of a clip's pixels, input or output clip,</li>
                  <li class="listitem">the pixel aspect ratio of a clip, input or output clip,</li>
                  <li class="listitem">the frame rate of the output clip, </li>
                  <li class="listitem">the fielding of the output clip,</li>
                  <li class="listitem">the premultiplication state of the output clip,</li>
                  <li class="listitem">whether the output clip varys from frame to frame, even if no paramerters or input images change over time,</li>
                  <li class="listitem">whether the output clip can be sampled at sub-frame times and produce different images.</li>
               </ul>
            </div>
            <p>
    </p>
            <p>
      The behaviour specified by OFX means that a host may need to cast images from their native data format into one suitable for the plugin. It is better that the host do any of this pixel shuffling because,
      </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">the behaviour is orthogonal for all plugins on that host,</li>
                  <li class="listitem">the code is not replicated in all plugins,</li>
                  <li class="listitem">the host can optimise the pixel shuffling in one pass with any other data grooming it may need to do.</li>
               </ul>
            </div>
            <p>
    </p>
            <p>
               A plugin gets to assert its clip preferences in several situations. Firstly whenever a clip is attached to a plugin, secondly whenever one of the parameters in the plugin property
               <a class="link" href="/documentation/reference/re116.html" title="kOfxImageEffectPropClipPreferencesSlaveParam">
                  <code class="code">kOfxImageEffectPropClipPreferencesSlaveParam</code>
               </a>
               has its value changed. The clip preferences action is never called until all non optional clips have been attached to the plugin.
            </p>
            <h5>
               <a id="idp12427984"></a>
               Note
            </h5>
            <p>
      </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">
                     these properties
                     <span class="emphasis">
                        <em>cannot</em>
                     </span>
                     animate over the duration of an effect,
                  </li>
                  <li class="listitem">that the ability to set input and output clip preferences is restricted by the context of an effect,</li>
                  <li class="listitem">optional input clips do not have any context specific restrictions on plugin set preferences.</li>
               </ul>
            </div>
            <p>
    </p>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both">
                           <a id="ImageEffectClipPreferencesFrameVarying"></a>
                           Frame Varying Effects
                        </h2>
                     </div>
                  </div>
               </div>
               <p>
                  Some plugins can generate differing output frames at different times, even if no parameters animate or no input images change. The
                  <a class="link" href="/documentation/reference/re105.html" title="kOfxImageEffectFrameVarying">
                     <code class="code">kOfxImageEffectFrameVarying</code>
                  </a>
                  property set in the clip preferences action is used to flag this.
               </p>
               <p>
	A counter example is a solid colour generator. If it has no animating parameters, the image generated at frame 0 will be the same as the image generated at any other frame. Intellegent hosts can render a single frame and cache that for use at all other times. 
      </p>
               <p>
On the other hand, a plugin that generates random noise at each frame, and seeds its random number generator with the render time, will create different images at different times. The host cannot render a single frame and cache that for use at subsequent times.
      </p>
               <p>
                  To differentiate between these two cases the
                  <a class="link" href="/documentation/reference/re105.html" title="kOfxImageEffectFrameVarying">
                     <code class="code">kOfxImageEffectFrameVarying</code>
                  </a>
                  is used. If set to 1, it indicates that the effect will need to be rendered at each frame, even if no input images or parameters are varying. If set to 0, then a single frame can be rendered and used for all times if no input images or parameters vary. The default value is 0.
               </p>
            </div>
         </div>
         <div class="navfooter">
            <hr></hr>
            <table width="100%" summary="Navigation footer">
               <tr>
                  <td width="40%" align="left">
                     <a accesskey="p" href="/documentation/reference/ch11s03.html">Prev</a>
                      
                  </td>
                  <td width="20%" align="center"> </td>
                  <td width="40%" align="right">
                      
                     <a accesskey="n" href="/documentation/reference/ch12s02.html">Next</a>
                  </td>
               </tr>
               <tr>
                  <td width="40%" align="left" valign="top">Interact Actions </td>
                  <td width="20%" align="center">
                     <a accesskey="h" href="/documentation/reference/index.html">Home</a>
                  </td>
                  <td width="40%" align="right" valign="top"> Continuously Sampled Effects</td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
      <title>Packaging OFX Plug-ins</title>
      <link rel="stylesheet" type="text/css" href="/assets/ofxStyle.css"></link>
      <meta name="generator" content="DocBook XSL Stylesheets V1.77.1"></meta>
      <link rel="home" href="/documentation/guide/index.html" title="OpenFX Plug-in API Programming Guide"></link>
      <link rel="up" href="/documentation/guide/ch03.html" title="Chapter 3. The Generic OFX Plug-in Architecture"></link>
      <link rel="prev" href="/documentation/guide/ch03s06.html" title="Errors, Status Codes and Exceptions"></link>
      <link rel="next" href="/documentation/guide/ch04.html" title="Chapter 4. Visual Effects Architectures"></link>
      <link rel="stylesheet" type="text/css" href="/assets/ofx-docbook-nav.css"></link>
   </head>
   <body>
      <div id="ofx-main-nav">
         <table>
            <tr>
               <td>
                  <ul>
                     <li>
                        <a href="/">
                           <img alt="Ofx small" src="/assets/OFX_small.png"></img>
                        </a>
                     </li>
                     <li>
                        <a href="/">
                           Back to Main Site
                           <span class="glyph"></span>
                        </a>
                     </li>
                     <li>
                        <a href="/documentation/guide">Programming Guide</a>
                     </li>
                     <li>
                        <a href="/documentation/reference">Programming Reference</a>
                     </li>
                     <li>
                        <a href="/documentation/api_doc">API Reference</a>
                     </li>
                  </ul>
               </td>
            </tr>
         </table>
      </div>
      <div class="wrapper" id="guide">
         <div class="navheader">
            <table width="100%" summary="Navigation header">
               <tr>
                  <th colspan="3" align="center">Packaging OFX Plug-ins</th>
               </tr>
               <tr>
                  <td width="20%" align="left">
                     <a accesskey="p" href="/documentation/guide/ch03s06.html">Prev</a>
                      
                  </td>
                  <th width="60%" align="center">Chapter 3. The Generic OFX Plug-in Architecture</th>
                  <td width="20%" align="right">
                      
                     <a accesskey="n" href="/documentation/guide/ch04.html">Next</a>
                  </td>
               </tr>
            </table>
            <hr></hr>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both">
                        <a id="idp140729791905024"></a>
                        Packaging OFX Plug-ins
                     </h2>
                  </div>
               </div>
            </div>
            <p>Where a host application chooses to search for OFX plug ins, what
      binary format they are in and any directory hierarchy is entirely up to
      it. However, it is strongly recommended that the following scheme be
      followed.</p>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="idp140729791906288"></a>
                           Binary Types
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Plug-ins should be distributed in the following formats,
        depending on the host operating system.... </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
               Microsoft Windows, as ".dll" dynamically linked libraries, 
            </li>
                     <li class="listitem">
               Apple OSX, as Mach-O binary bundles, 
            </li>
                     <li class="listitem">
               IRIX and LINUX, as ELF dynamic shared objects. 
            </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="idp140729791908848"></a>
                           Installation Directory Hierarchy
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  Each plug-in binary is distributed as a Mac OS X package style directory hierarchy. Note that the there are two distinct meanings of 'bundle', one referring to a binary file format, the other to a directory hierarchy used to distribute software. We are distributing binaries in a bundle package, and in the case of OSX, the binary is a binary bundle. All the binaries must end with
                  <code class="literal">".ofx"</code>
                  , regardless of the host operating system.
               </p>
               <p>The directory hierarchy is as follows..... </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
                        NAME.ofx.bundle
                        <div class="itemizedlist">
                           <ul class="itemizedlist" style="list-style-type: circle; ">
                              <li class="listitem">
                                 Contents
                                 <div class="itemizedlist">
                                    <div class="itemizedlist">
                                       <ul class="itemizedlist" style="list-style-type: disc; ">
                                          <li class="listitem">
                                             ARCHITECTURE_A
                                             <div class="itemizedlist">
                                                <ul class="itemizedlist" style="list-style-type: circle; ">
                                                   <li class="listitem">NAME.ofx</li>
                                                </ul>
                                             </div>
                                          </li>
                                       </ul>
                                    </div>
                                    <div class="itemizedlist">
                                       <ul class="itemizedlist" style="list-style-type: disc; ">
                                          <li class="listitem">
                                             ARCHITECTURE_B
                                             <div class="itemizedlist">
                                                <ul class="itemizedlist" style="list-style-type: circle; ">
                                                   <li class="listitem">NAME.ofx</li>
                                                </ul>
                                             </div>
                                          </li>
                                       </ul>
                                    </div>
                                    <ul class="itemizedlist" style="list-style-type: square; ">
                                       <li class="listitem">Info.plist</li>
                                       <li class="listitem">
                                          Resources
                                          <div class="itemizedlist">
                                             <ul class="itemizedlist" style="list-style-type: disc; ">
                                                <li class="listitem">NAME.xml</li>
                                                <li class="listitem">PLUGIN_A.png</li>
                                                <li class="listitem">PLUGIN_B.png</li>
                                                <li class="listitem">...</li>
                                                <li class="listitem">PLUGIN_N.png</li>
                                             </ul>
                                          </div>
                                       </li>
                                       <li class="listitem">....</li>
                                       <li class="listitem">
                                          ARCHITECTURE_N
                                          <div class="itemizedlist">
                                             <ul class="itemizedlist" style="list-style-type: disc; ">
                                                <li class="listitem">NAME.ofx</li>
                                             </ul>
                                          </div>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ul>
               </div>
               <p> Where... </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
               Info.plist is relevant for OSX only and needs to be filled in appropriately, 
            </li>
                     <li class="listitem">
               NAME is the file name you want the installed plug-in to be identified by, 
            </li>
                     <li class="listitem">
                        PLUGIN.png - is the image to use as an icon for the plug-in in the binary which has a matching
                        <em class="structfield">
                           <code>pluginIdentifier</code>
                        </em>
                        field in the
                        <span class="structname">OfxPlugin</span>
                        struct,
                     </li>
                     <li class="listitem">
                        ARCHITECTURE is the specific operating system architecture the plug-in was built for, these are currently...
                        <div class="itemizedlist">
                           <ul class="itemizedlist" style="list-style-type: circle; ">
                              <li class="listitem">MacOS - for Apple Macintosh OS X (compiled 32
                bit)</li>
                              <li class="listitem">Win32 - for Microsoft Windows (compiled 32
                bit)</li>
                              <li class="listitem">IRIX - for SGI IRIX plug-ins (compiled 32
                bit)</li>
                              <li class="listitem">IRIX64 - for SGI IRIX plug-ins (compiled 64
                bit)</li>
                              <li class="listitem">Linux-x86 - for Linux on intel x86 CPUs (compiled 32
                bit)</li>
                              <li class="listitem">Linux-x86-64 - for Linux on intel x86 CPUs running
                AMD's 64 bit extensions</li>
                           </ul>
                        </div>
                     </li>
                  </ul>
               </div>
               <p> Note that not all the above architectures need be
        supported, only at least one.</p>
               <p>This structure is necessary on OS X, but it also gives a nice
        skeleton to hang all other operating systems from in a single install,
        as well as a clean place to put resources.</p>
               <p>
                  The
                  <code class="filename">Info.plist</code>
                  is specific to Apple and you should consult the Apple developer's website for more details. It should contain the following keys...
               </p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
               CFBundleExecutable - the name of the binary bundle in the MacOS directory 
            </li>
                     <li class="listitem">
               CFBundlePackageType - to be 'BNDL' 
            </li>
                     <li class="listitem">
               CFBundleInfoDictionaryVersion 
            </li>
                     <li class="listitem">
               CFBundleVersion 
            </li>
                     <li class="listitem">
               CFBundleDevelopmentRegion 
            </li>
                  </ul>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="ArchitectureInstallingLocation"></a>
                           Installation Location
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Plug ins are searched for in a variety of locations, both
        default and user specified. All such directories are examined for
        plug-in bundles and sub directories are also recursively
        examined.</p>
               <p>A list of directories is supplied in the "OFX_PLUGIN_PATH"
        environment variable, these are examined, first to last, for plug ins,
        then the default location is examined.</p>
               <p>On Microsoft Windows machines, the plug ins are searched for in,
        </p>
               <div class="orderedlist">
                  <ol class="orderedlist" type="1">
                     <li class="listitem">
               the ';' separated directory list specified by the environment variable "OFX_PLUGIN_PATH" 
            </li>
                     <li class="listitem">
               the directory "C:\Program Files\Common Files\OFX\Plugins" 
            </li>
                  </ol>
               </div>
               <p> On Apple OSX machines, the plug ins are searched for
        in, </p>
               <div class="orderedlist">
                  <ol class="orderedlist" type="1">
                     <li class="listitem">
               the ';' separated directory list specified by the environment variable "OFX_PLUGIN_PATH" 
            </li>
                     <li class="listitem">
               the directory "/Library/OFX/Plugins" 
            </li>
                  </ol>
               </div>
               <p> On UNIX, Linux and other UNIX like operating systems,
        </p>
               <div class="orderedlist">
                  <ol class="orderedlist" type="1">
                     <li class="listitem">
               the ':' separated directory specified by the environment variable "OFX_PLUGIN_PATH" 
            </li>
                     <li class="listitem">
               the directory "/usr/OFX/Plugins" 
            </li>
                  </ol>
               </div>
               <p>Any bundle or sub-directory name starting with the character '@'
        is to be ignored. Such directories or bundles must be skipped.</p>
               <p>Different versions of the same plug-in may be encountered in
        multiple locations, in which case, only the greatest minor version of
        each major version should be taken note of. For example: 3.2, 1.4 and
        2.3 would be noted, but not 3.1, 1.3 or 2.0.</p>
               <p>If two copies of a plug-in with the same major and minor version
        are encountered, it can be assumed they are duplicates and all but the
        first one ignored.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="idp140729791939088"></a>
                           plug-in Icons
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Some hosts may wish to display an icon associated with a plug-in
        on their interfaces. Any such icon must be in the Portable Network
        Graphics format (see http://www.libpng.org/) and must contain 32 bits
        of colour, including an alpha channel. Ideally it should be at least
        128x128 pixels.</p>
               <p>Host applications should dynamically resize the icon to fit
        their preferred icon size. The icon should not have it's aspect
        changed, rather the host should fill with some appropriate colour any
        blank areas due to aspect mis matches.</p>
               <p>Ideally plug-in developers should not render the plug-in's name
        into the icon, as this may be changed by the resource file, especially
        for internationalisation purposes. Hosts should thus present the
        plug-in's name next to the icon in some way.</p>
               <p>
                  The icon file must be named as the corresponding
                  <em class="structfield">
                     <code>pluginIdentifier</code>
                  </em>
                  field from the
                  <span class="structname">OfxPlugin</span>
                  , post pended with '.png' and be placed in the resources sub-directory.
               </p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="idp140729791943024"></a>
                           Externally Specified Resources
                        </h3>
                     </div>
                  </div>
               </div>
               <p>
                  Some plug-ins may supply an externally specified resource file. Typically this is for tasks such as internationalising interfaces, tweaking user interfaces for specific hosts and so on. These are XML files and have DTD associated with the specific API, for example OFX Image Effect DTD is found in
                  <code class="filename">ofx.dtd</code>
                  .
               </p>
               <p>
                  The xml resource file is installed in the
                  <code class="filename">Resources</code>
                  sub directory of the bundle hierarchy. It's name will be
                  <code class="filename">NAME.xml</code>
                  , where name is the base name of the bundle folder and the effect binaries.
               </p>
            </div>
         </div>
         <div class="navfooter">
            <hr></hr>
            <table width="100%" summary="Navigation footer">
               <tr>
                  <td width="40%" align="left">
                     <a accesskey="p" href="/documentation/guide/ch03s06.html">Prev</a>
                      
                  </td>
                  <td width="20%" align="center">
                     <a accesskey="u" href="/documentation/guide/ch03.html">Up</a>
                  </td>
                  <td width="40%" align="right">
                      
                     <a accesskey="n" href="/documentation/guide/ch04.html">Next</a>
                  </td>
               </tr>
               <tr>
                  <td width="40%" align="left" valign="top">Errors, Status Codes and Exceptions </td>
                  <td width="20%" align="center">
                     <a accesskey="h" href="/documentation/guide/index.html">Home</a>
                  </td>
                  <td width="40%" align="right" valign="top"> Chapter 4. Visual Effects Architectures</td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>
